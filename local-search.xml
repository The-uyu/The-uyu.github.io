<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>GraphRAG+本地部署模型</title>
    <link href="/2024/09/12/%E8%AE%B0%E5%BD%95-GraphRAG-%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E6%A8%A1%E5%9E%8B/"/>
    <url>/2024/09/12/%E8%AE%B0%E5%BD%95-GraphRAG-%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="记录GraphRAG-本地部署模型"><a href="#记录GraphRAG-本地部署模型" class="headerlink" title="记录GraphRAG + 本地部署模型"></a>记录GraphRAG + 本地部署模型</h1><h2 id="GraphRAG-安装"><a href="#GraphRAG-安装" class="headerlink" title="GraphRAG 安装"></a>GraphRAG 安装</h2><p>非常的简单 跟着官方文档即可</p><h2 id="LMStudio方案（失败）"><a href="#LMStudio方案（失败）" class="headerlink" title="LMStudio方案（失败）"></a>LMStudio方案（失败）</h2><p>没有成功</p><p>模型和embedding模型的端口一样都是到v1结尾的端口</p><p>模型名称 到GGUF结尾的文件夹</p><p>但是最后在关系汇总阶段出错，我怀疑是因为这个电脑的GPU不是英伟达显卡</p><h2 id="OLlama方案（成功）"><a href="#OLlama方案（成功）" class="headerlink" title="OLlama方案（成功）"></a>OLlama方案（成功）</h2><h3 id="ollama部署"><a href="#ollama部署" class="headerlink" title="ollama部署"></a>ollama部署</h3><p>OLlmama和LMStudio属于是竞品关系</p><p>这次我把OLlama部署在了服务器</p><p><a href="https://github.com/ollama/ollama">https://github.com/ollama/ollama</a></p><p><strong>ollama常用命令</strong></p><p>计算机上已下载的模型</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ollama list</span><br></code></pre></td></tr></table></figure><p>启动 Ollama</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ollama serve</span><br></code></pre></td></tr></table></figure><p>进程</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ollama ps</span><br></code></pre></td></tr></table></figure><h3 id="Graphrag-Local-Ollama——rga和ollama适配后的项目"><a href="#Graphrag-Local-Ollama——rga和ollama适配后的项目" class="headerlink" title="Graphrag-Local-Ollama——rga和ollama适配后的项目"></a>Graphrag-Local-Ollama——rga和ollama适配后的项目</h3><p><a href="https://github.com/TheAiSingularity/graphrag-local-ollama">https://github.com/TheAiSingularity/graphrag-local-ollama</a></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vim">初始化目录<br><span class="hljs-built_in">mkdir</span> -<span class="hljs-keyword">p</span> ./ragtest/<span class="hljs-built_in">input</span><br><br>复制示例输入<br><span class="hljs-keyword">cp</span> <span class="hljs-built_in">input</span>/* ./ragtest/<span class="hljs-built_in">input</span><br><br>初始化配置文件<br><span class="hljs-keyword">python</span> -<span class="hljs-keyword">m</span> graphrag.<span class="hljs-built_in">index</span> --init --root ./ragtest<br><br>修改配置文件后，建立图索引<br><span class="hljs-keyword">python</span> -<span class="hljs-keyword">m</span> graphrag.<span class="hljs-built_in">index</span> --root ./ragtest<br><br>仅支持全局查询<br><span class="hljs-keyword">python</span> -<span class="hljs-keyword">m</span> graphrag.query --root ./ragtest --method <span class="hljs-keyword">global</span> <span class="hljs-string">&quot;What is machinelearning?&quot;</span><br><br><br>局部查询可以对项目进行进一步的修改<br></code></pre></td></tr></table></figure><p><strong>尝试记录</strong></p><ul><li><p>配置 llama3  nojson maxToken：2000</p><p>❌ create_final_community_reports</p></li><li><p>配置 llama3  json maxToken：2000</p><p>🚀 All workflows completed successfully.</p><ul><li><p>提问</p><p>Error parsing search response json</p><p>可能是模型的温度过高导致 开始对ollama模型进行设置</p><p>Ollama modelfile指令详解</p><p><a href="https://wx.kaifamiao.info/index.php/2024/05/08/ollama-modelfile-zhi-ling-xiang-jie/">https://wx.kaifamiao.info/index.php/2024/05/08/ollama-modelfile-zhi-ling-xiang-jie/</a></p><p>成功得到回答</p></li></ul><p><strong>但是仍然不知道为什么llama3 nojson为什么不行</strong></p></li></ul><h3 id="Ollama-modelfile自定义模型"><a href="#Ollama-modelfile自定义模型" class="headerlink" title="Ollama modelfile自定义模型"></a>Ollama modelfile自定义模型</h3><p>先创建一个文件名xx.modelfile</p><p>然后填入</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">FROM</span> llama3.<span class="hljs-number">1</span><br><br><span class="hljs-comment"># sets the temperature to 1 [higher is more creative, lower is more coherent]</span><br><br><span class="hljs-attribute">PARAMETER</span> temperature <span class="hljs-number">0</span>.<span class="hljs-number">3</span><br><br><span class="hljs-comment"># sets the context window size to 4096, this controls how many tokens the LLM can use as context to generate the next token</span><br><br><span class="hljs-comment">#PARAMETER num_ctx 4096</span><br><br><br><br><span class="hljs-comment"># sets a custom system message to specify the behavior of the chat assistant</span><br><br><span class="hljs-comment">#SYSTEM You are Mario from super mario bros, acting as an assistant.</span><br></code></pre></td></tr></table></figure><p>运行命令创建模型</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ollama <span class="hljs-built_in">create</span> myllama3 <span class="hljs-comment">--file myllama3.modelfile</span><br></code></pre></td></tr></table></figure><h3 id="可视化图文件"><a href="#可视化图文件" class="headerlink" title="可视化图文件"></a>可视化图文件</h3><p>需要修改配置文件中的</p><p><img src="/2024/09/12/%E8%AE%B0%E5%BD%95-GraphRAG-%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E6%A8%A1%E5%9E%8B/%E5%8F%AF%E8%A7%86%E5%8C%96.png" alt="可视化"></p><p>在根目录创建脚本</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">from</span> pygraphml <span class="hljs-keyword">import</span> GraphMLParser<br>parser = GraphMLParser()<br>g = <span class="hljs-keyword">parser</span>.parse(&quot;./graphrag-local-ollama/ragtest/output/***/artifacts/summarized_graph.graphml&quot;)<br>g.<span class="hljs-keyword">show</span>()<br></code></pre></td></tr></table></figure><p>之后可以得到一个html文件，用浏览器打开即可拖动</p><p>说实话我没看懂这个节点的意思</p><h2 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h2><p><a href="https://developer.aliyun.com/article/1575047">https://developer.aliyun.com/article/1575047</a></p><h2 id="不同模型的回答对比"><a href="#不同模型的回答对比" class="headerlink" title="不同模型的回答对比"></a>不同模型的回答对比</h2><h3 id="qwen"><a href="#qwen" class="headerlink" title="qwen"></a>qwen</h3><blockquote><p>  Machine Learning refers to a subset of artificial intelligence that enables systems to learn and improve from experience without explicit programming [Data: Reports (1)]. It is primarily used for statistical analysis, data analysis, and prediction.</p><p>  One type of machine learning algorithm, Convolutional Neural Networks (CNNs), are particularly effective in processing grid-like data such as images [Data: Reports (1)]. They are widely employed in various fields including Medical Imaging, Autonomous Vehicles, Natural Language Processing, Video Analysis, and Facial Recognition Systems.</p><p>  In the field of Medical Imaging, CNNs have led to improved diagnostic accuracy and reduced human error by analyzing X-rays, MRIs, and CT scans [Data: Reports (1)]. In Autonomous Vehicles, CNNs are used for tasks like lane detection and obstacle recognition, which could significantly reduce accidents caused by human error, making roads safer [Data: Reports (1)].</p><p>  However, concerns about privacy and security persist as autonomous vehicles collect vast amounts of data. Similarly, the use of CNNs in various applications raises privacy concerns due to the potential for mass surveillance [Data: Reports (+more)]. It is crucial to address these issues to ensure the responsible use of this technology.</p></blockquote><h3 id="llama3-1"><a href="#llama3-1" class="headerlink" title="llama3.1"></a>llama3.1</h3><blockquote><p>:<strong>Machine Learning: A Subset of Artificial Intelligence</strong></p><p>Machine learning is a subset of artificial intelligence (AI) that involves training algorithms on data to enable them to make predictions or decisions without being explicitly programmed.</p><p><strong>Key Characteristics</strong></p><p>Machine learning can be used for tasks such as image and speech recognition, natural language processing, and predictive analytics. It has several key characteristics:</p><ul><li><strong>Data-driven</strong>: Machine learning models are trained on large datasets to learn patterns and relationships.</li><li><strong>Algorithmic</strong>: Machine learning algorithms are designed to make predictions or decisions based on the data they’ve been trained on.</li><li><strong>Adaptive</strong>: Machine learning models can adapt to new data and improve their performance over time.</li></ul><p><strong>Applications</strong></p><p>Machine learning has a wide range of applications, including:</p><ul><li><strong>Image recognition</strong>: Machine learning algorithms can be used to recognize objects in images, such as faces or products.</li><li><strong>Speech recognition</strong>: Machine learning algorithms can be used to transcribe spoken language into text.</li><li><strong>Predictive analytics</strong>: Machine learning algorithms can be used to make predictions about future events or trends.</li></ul><p><strong>Data References</strong></p><p>Machine learning is a powerful tool for analyzing and making decisions based on data. Some relevant data references include:</p><ul><li>Reports (1, 3)</li><li>Entities (35)</li></ul></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>GraphRAG</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2024/07/26/hello-world/"/>
    <url>/2024/07/26/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
